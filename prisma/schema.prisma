generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model CarImages {
  id        Int    @id @default(autoincrement())
  car_id    Int?
  image_url String
  car       cars?  @relation("CarToCarImages", fields: [car_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("car_images")
}

model booking_extras {
  id         Int       @id @default(autoincrement())
  booking_id Int?
  extra_id   Int?
  quantity   Int?
  bookings   bookings? @relation(fields: [booking_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  extras     extras?   @relation(fields: [extra_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model bookings {
  id             Int              @id @default(autoincrement())
  car_id         Int
  user_id        Int?
  start_date     DateTime         @db.Timestamp(6)
  end_date       DateTime         @db.Timestamp(6)
  status         String?          @default("active") @db.VarChar(20)
  created_at     DateTime?        @default(now()) @db.Timestamp(6)
  updated_at     DateTime?        @default(now()) @db.Timestamp(6)
  booking_extras booking_extras[]
  cars           cars             @relation(fields: [car_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_car_id")
  users          users?           @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_user_id")
}

model cars {
  id                Int         @id @default(autoincrement())
  car_name          String      @db.VarChar(100)
  mpg               Decimal?    @db.Decimal(5, 2)
  gas_type          String?     @db.VarChar(50)
  num_doors         Int?
  num_seats         Int?
  short_description String?
  long_description  String?
  features          String?
  extras            String?
  guidelines        String?
  faqs              Json?
  price             Decimal     @db.Decimal(10, 2)
  turo_url          String?
  make              String?     @db.VarChar(100)
  model             String?     @db.VarChar(100)
  year              Int?
  type              String?     @db.VarChar(50)
  bookings          bookings[]
  car_images        CarImages[] @relation("CarToCarImages")
}

model extras {
  id                 Int              @id @default(autoincrement())
  name               String           @db.VarChar(255)
  description        String?
  available_quantity Int?
  available          Boolean?         @default(true)
  price_type         String?          @db.VarChar(50)
  price_amount       Int?
  booking_extras     booking_extras[]
}

model users {
  id            Int        @id @default(autoincrement())
  username      String     @unique @db.VarChar(50)
  password_hash String     @db.VarChar(100)
  email         String     @unique @db.VarChar(100)
  full_name     String?    @db.VarChar(100)
  created_at    DateTime?  @default(now()) @db.Timestamp(6)
  bookings      bookings[]
}
